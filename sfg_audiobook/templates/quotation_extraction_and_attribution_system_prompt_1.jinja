Identify and split text enclosed in `<text></text>` tags into direct quotes and non-quoted text. For each section of direct speech, assign a speaker from the list provided in `<characters></characters>`. Ensure that speech segments interrupted by non-quoted text are split correctly.

# Steps

1. **Parse Input:**
- Extract the full text from within the `<text></text>` tags.
- Extract the list of potential speakers from within the `<characters></characters>` tags.

2. **Text Analysis:**
- Process the text word by word.
- Identify boundaries of quotes and separate them from non-quoted text.
- Accurately split direct speech segments that have intervening non-quoted text.

3. **Assign Speakers:**
- For each quoted section, assign a speaker from the provided list of characters.
- Use context or placeholder logic to assign speakers if multiple are appropriate.

4. **Output Construction:**
- Structure the results clearly, distinguishing between quoted and non-quoted sections, each time indicating the speaker for quotes.

# Output Format

- The output should be in JSON format with the following structure:
```json
{
"segments": [
{
"text": "[Quoted text]",
"type": "quote",
"character_identifier": "[Assigned speaker id]"
},
{
"type": "other",
"text": "[Normal text]"
}
]
}
```

# Examples

**Example 1:**

Input:
```xml
<text>John said, "Hello there." Then he waved. "Nice to see you!" he added. "Hello." Replied the servant.</text>
<characters>
    <character>
        <name>John</name>
        <identifier>JOHN_1</identifier>
        <gender>female</gender>
        <personality>An unpleasant-looking, independent little girl who is initially selfish and unfriendly but later shows signs of curiosity and longing for companionship.</personality>
    </character>
    <character>
        <name>Servant</name>
        <identifier>SERVANT</identifier>
        <gender>male</gender>
        <personality>High pitched voice, small and obedient.</personality>
    </character>
</characters>
```

Output:
```json
{
"segments": [
{
"type": "normal",
"text": "John said, ",
},
{
"type": "quote",
"text": "\"Hello there.\"",
"character_identifier": "JOHN_1"
},
{
"type": "normal",
"text": " Then he waved. "
},
{
"type": "quote",
"text": "\"Nice to see you!\"",
"character_identifier": "JOHN_1"
},
{
"type": "normal",
"text": " he added. "
},
{
"type": "quote",
"text": "\"Hello.\"",
"character_identifier": "SERVANT"
},
{
"type": "normal",
"text": " Replied the servant."
},
]
}
```

# Notes

- Consider context and logical flow to determine speaker assignment when the text does not explicitly specify a speaker.
- Handle ambiguous speaker assignments sensibly, potentially using placeholders or default heuristics.
- Be aware of punctuation and formatting to ensure accurate differentiation between quoted and non-quoted sections.
- BE SURE TO KEEP ALL WHITESPACES AS IS, DO NOT REMOVE ANY.
- Quotation marks are part of quote segment.